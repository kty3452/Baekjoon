#include <iostream>

using namespace std;

int main(){
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cout.tie(nullptr);

    int n, m;
    cin >> n >> m;

    int paper[500][500] = {0, };
    int tetromino[19][4][2] = {
        {{0, 0}, {0, 1}, {0, 2}, {0, 3}},
        {{0, 0}, {1, 0}, {2, 0}, {3, 0}},

        {{0, 0}, {0, 1}, {1, 0}, {1, 1}},

        {{0, 0}, {1, 0}, {2, 0}, {2, 1}},
        {{0, 0}, {1, 0}, {2, 0}, {2, -1}},
        {{0, 0}, {0, 1}, {0, 2}, {-1, 2}},
        {{0, 0}, {0, 1}, {0, 2}, {1, 2}},
        {{0, 0}, {-1, 0}, {-2, 0}, {-2, 1}},
        {{0, 0}, {-1, 0}, {-2, 0}, {-2, -1}},
        {{0, 0}, {0, -1}, {0, -2}, {-1, -2}},
        {{0, 0}, {0, -1}, {0, -2}, {1, -2}},

        {{0, 0}, {1, 0}, {1, 1}, {2, 1}},
        {{0, 0}, {1, 0}, {1, -1}, {2, -1}},
        {{0, 0}, {0, 1}, {-1, 1}, {-1, 2}},
        {{0, 0}, {0, 1}, {1, 1}, {1, 2}},

        {{0, 0}, {0, 1}, {0, 2}, {1, 1}},
        {{0, 0}, {0, 1}, {0, 2}, {-1, 1}},
        {{0, 0}, {-1, 0}, {-2, 0}, {-1, 1}},
        {{0, 0}, {-1, 0}, {-2, 0}, {-1, -1}},
    };

    for(int i = 0;i < n;i++){
        for(int j = 0;j < m;j++){
            cin >> paper[i][j];
        }
    }
    int max = 0;
    for(int i = 0;i < 19;i++){
        for(int j = 0;j < n;j++){
            for(int k = 0;k < m;k++){
                int sum = 0;
                bool check = true;
                for(int l = 0;l < 4;l++){
                    int y = j + tetromino[i][l][0];
                    int x = k + tetromino[i][l][1];
                    if(y < 0 || y >= n || x < 0 || x >= m) {
                        check = false;
                        break;
                    }
                    sum += paper[y][x];
                }
                if(check)
                    max = max > sum ? max : sum;
                
            }
        }
    }
    cout << max;

    return 0;
}